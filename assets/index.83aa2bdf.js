var z=Object.defineProperty,G=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var M=(s,t,o)=>t in s?z(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,x=(s,t)=>{for(var o in t||(t={}))W.call(t,o)&&M(s,o,t[o]);if(O)for(var o of O(t))X.call(t,o)&&M(s,o,t[o]);return s},C=(s,t)=>G(s,Q(t));import{r as m,j as b,F as Z,a as e,B as v,M as T,n as ee,b as w,R as A,C as k,I,c as L,L as te,P as se,U as ae,D as ne,d as oe,e as re,f as ce,g as ie}from"./vendor.04409ec3.js";const le=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}};le();var de=[{id:"default",coverImage:"https://conversions.am-usercontent.com/images/popup_background_image_5f0d44ba40c0465e8b43648722354f47.jpeg",productType:"newsletters",title:"Default",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/46a3d9fa08f14b19fdb6f88e12a5c69f"},{id:"coupon_01",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_3b4acf3f55b1461c90fc926eef6dca7f.jpeg",productType:"newsletters",title:"Coupon 01",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/2ebc427035144ed1e3a427da10ffd445"},{id:"coupon_05",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_7b4e8013d92b452181b9c9cdd6599fc0.jpeg",productType:"newsletters",title:"Coupon 05",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/a380bd4c3d3e4d29f9d23cfc166b3253"},{id:"new_arrival_05",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_cf95abbbcd3543c1a1a9c403960c50e0.jpeg",productType:"newsletters",title:"New Arrival 05",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/d8ef8666f360435cf8f7774812939e22"},{id:"new_collection_05",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_a32df7cee10d4bf29cc03ab9576be34d.jpeg",productType:"newsletters",title:"New Collection 05",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/031351d73cb74b83f678ba481a816c61"},{id:"coupon_02",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_b4189586dd094a7c959a3d220b62f3de.jpeg",productType:"newsletters",title:"Coupon 02",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/16fd69f4b93d461dfdd955d21b3f4cba"},{id:"coupon_03",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_7f34ac87863e40b2ab5540a65c809125.jpeg",productType:"newsletters",title:"Coupon 03",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/ef80fa033acd488ef82c6c7c1c75edc1"},{id:"coupon_04",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_a2de0f360a974b6bb7bd7f0af616ce03.jpeg",productType:"newsletters",title:"Coupon 04",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/6a28f5a4c4b640b7f395e3fb1fb1b0da"},{id:"new_arrival_01",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_9b230ff979344cf589206fa2c108485c.jpeg",productType:"newsletters",title:"New Arrival 01",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/11f76d0dcc67441be0ceac4517d05f73"},{id:"new_arrival_02",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_899cdec29a894ea69c8a9e9886613abf.jpeg",productType:"newsletters",title:"New Arrival 02",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/5cd9ea8a01344450f3119d251b3d6c64"},{id:"new_arrival_03",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_ccf6fc0bf766436c9faee2d5474c6a1b.jpeg",productType:"newsletters",title:"New Arrival 03",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/d5fb6134b14845d2fff28a711c9f3aa9"},{id:"new_arrival_04",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_dec8175583ae4ea6b2df44d751141570.jpeg",productType:"newsletters",title:"New Arrival 04",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/32642f68caa64336f9c422eb1be02200"},{id:"new_collection_01",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_53f3603e376e4f61a6b8f185cf154191.jpeg",productType:"newsletters",title:"New Collection 01",fullS3FilePath:"https://s3/testing/newsletters/new_collection_01.json"},{id:"new_collection_02",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_1331feecc5414befb8415887a020abf8.jpeg",productType:"newsletters",title:"New Collection 02",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/f39ae09c90494784e2c09de61bf81d60"},{id:"new_collection_03",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_ba05cc96f64e4a83a3a6a7899ddaaa40.jpeg",productType:"newsletters",title:"New Collection 03",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/22238c7e9d06451aeb1f743a1ccd3d8b"},{id:"new_collection_04",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_77aac06bb88d4478a86a837b2d669629.jpeg",productType:"newsletters",title:"New Collection 04",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/f4d6b7316a684edbe4e540b519f71a63"},{id:"labor_day_01",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_40097d48bc074c5d8272620f1084faec.jpeg",productType:"newsletters",title:"Labor Day 01",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/b6101f5703c04623e8aaf0f912284063"},{id:"labor_day_02",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_06537185d06e43e7b152429109723215.jpeg",productType:"newsletters",title:"Labor Day 02",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/665eed36f38949ddeb0b4dab17897f7d"},{id:"labor_day_03",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_22a091a80ba54ab68755c49864c4145a.jpeg",productType:"newsletters",title:"Labor Day 03",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/5be922064b9640caf0b6942514e7b08d"},{id:"halloween_01",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_767abaf2659c43449a2f8aa4daf8ce8e.jpeg",productType:"newsletters",title:"Halloween 01",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/081d1ba65df8496df5661cf41387c0d9"},{id:"halloween_02",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_258c98b063e14add8d51072a479639b1.jpeg",productType:"newsletters",title:"Halloween 02",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/ccd8469ca45540baef1724a11dbb6071"},{id:"halloween_03",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_90c635e9fe474738890661ba19ad36ba.jpeg",productType:"newsletters",title:"Halloween 03",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/e2da3ada4a84477df68740901cfb7fed"},{id:"new_arrival_for_black_friday",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_b2b3cb10f81c451795559591c5c57380.jpeg",productType:"newsletters",title:"New Arrival For Black Friday",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/3d5ce1a82b0f40edf15f3dee1a3d80eb"},{id:"collection_for_black_friday",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_b5d24c5e1f484474851345407ee98ec5.jpeg",productType:"newsletters",title:"Collection For Black Friday",fullS3FilePath:"https://s3/testing/newsletters/collection_for_black_friday.json"},{id:"coupon_for_black_friday",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_e26bf4a2b30642319e158bb97d138d40.jpeg",productType:"newsletters",title:"Coupon For Black Friday",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/a239bc4521a644e3fe0de70e158f3660"},{id:"cyberMonday_01",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_8a8a18cfd25346e7be68b6ff09e83b68.jpeg",productType:"newsletters",title:"CyberMonday 01",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/300ad9736b384fc8e4ba1e6a1a56b5c8"},{id:"cyberMonday_02",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_3512c0df5b1f420ca6ef62d27a56b1ba.jpeg",productType:"newsletters",title:"CyberMonday 02",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/7d7ba86cafbe4f2aee738f0e128613e3"},{id:"cyberMonday_03",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_3c1fa93894d144e3a3d03ab32728418b.jpeg",productType:"newsletters",title:"CyberMonday 03",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/a0490f08ece240e0fc1a14711a5f43f2"},{id:"new_arrival_for_thanksgiving",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_6dc5493a996642a88fdcb61bdefcd19d.jpeg",productType:"newsletters",title:"New Arrival For Thanksgiving",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/8795c4d5964145c2e9f723d2192eb416"},{id:"collection_for_thanksgiving",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_481eeb59f70d4bceb19d0eb65dc57f39.jpeg",productType:"newsletters",title:"Collection For Thanksgiving",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/10c11ce38c0e4baaec3241f7182df75b"},{id:"coupon_for_thanksgiving",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_002651f114274ba894cc05fe03217619.jpeg",productType:"newsletters",title:"Coupon For Thanksgiving",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/3d89f03ac7484367ee9a82d91dad36a1"},{id:"new_arrival_for_christmas",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_0919017a43d14ec5b64f7b60f9b48e41.jpeg",productType:"newsletters",title:"New Arrival For Christmas",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/79f694f0b2ce444ef2010a781f986404"},{id:"collection_for_christmas",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_8de53cab43774c0cb3bc0685d4690a23.jpeg",productType:"newsletters",title:"Collection For Christmas",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/5c9bfa7ad3df4448f49040d21e56db14"},{id:"coupon_for_christmas",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_f3ca975b72274c229922e85f336b550b.jpeg",productType:"newsletters",title:"Coupon For Christmas",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/f6039ddb2a094f03ec2abb6b1fc00b7f"},{id:"new_arrival_for_new_year",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_682013d6f3ad4e23a06180a46fa1c31a.jpeg",productType:"newsletters",title:"New Arrival For New Year",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/58c7248910bc4394f8bb50c0116e25ed"},{id:"collection_for_new_year",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_50d729a49e25487fbad191d8d7cb5232.jpeg",productType:"newsletters",title:"Collection For New Year",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/ab17ace3896944e1ec783e5a1843b718"},{id:"coupon_for_new_year",coverImage:"https://conversions.am-usercontent.com/images/email_image_text_132f5fef008643d0bffeaf0448e20e74.jpeg",productType:"newsletters",title:"Coupon For New Year",fullS3FilePath:"https://assets.am-static.com/test/marketing/newsletters/bd2b6687bd7640c4e59f5c5c13d56765"}];const me=(s,t,o)=>{const r=Array.from(s),[a]=r.splice(t,1);return r.splice(o,0,a),r},pe=(s,t,o,r)=>{const a=Array.from(s),i=Array.from(t),[f]=a.splice(o.index,1);i.splice(r.index,0,f);const d={};return d[o.droppableId]=a,d[r.droppableId]=i,d},fe=({children:s,addNewItem:t,prepareToGenManifest:o})=>{const[r,a]=m.exports.useState(!1),i=m.exports.useMemo(()=>o(),[o]),f=()=>{a(!0)},d=()=>{a(!1)},_=()=>{a(!1)},F=()=>{ee.open({message:"Copied to clipboard"})};return b(Z,{children:[e(v,{type:"primary",onClick:f,children:"Copy new json manifest"}),e(T,{title:"Basic Modal",visible:r,onOk:d,onCancel:_,width:"80%",children:b("div",{children:[e(v,{type:"primary",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(i)).then(()=>{console.log("Copied to clipboard"),F()})},children:"Copy Json"}),e("hr",{}),e("pre",{children:JSON.stringify(i,null,2)})]})})]})},ue=({genContent:s})=>{const t=m.exports.useCallback(()=>{const o=document.createElement("a"),a=JSON.stringify(s()).split(`
`),i=new Blob([a.join(`\r
`)],{type:"text/plain; charset=utf-8"}),f=URL.createObjectURL(i),d="manifest.json";o.href=f,o.download=d,o.click(),URL.revokeObjectURL(f)},[s]);return e(v,{type:"primary",onClick:t,children:"Download"})},ge=({setIsModalVisible:s,visible:t,onSubmit:o,onCancel:r})=>{const[a]=w.useForm(),i=()=>{a.validateFields().then(_=>{console.log(_),o(_)}).catch(_=>{})};return e(T,{title:"Basic Modal",visible:t,onOk:()=>{i(),s(!1)},onCancel:()=>{r&&r(),s(!1)},children:e(w,{name:"addNewItem",layout:"vertical",form:a,children:b(A,{gutter:24,children:[e(k,{span:12,children:e(w.Item,{name:"id",label:"Id",rules:[{required:!0,message:"Id required!"}],children:e(I,{})})}),e(k,{span:12,children:e(w.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Cover required!"}],children:e(I,{})})}),e(k,{span:12,children:e(w.Item,{name:"coverImage",label:"Cover",rules:[{required:!0,message:"Cover required!"}],children:e(I,{})})}),e(k,{span:12,children:e(w.Item,{name:"fullS3FilePath",label:"Full S3 file path",rules:[{required:!0,message:"Cover required!"}],children:e(I,{})})}),e(k,{span:12,children:e(w.Item,{name:"productType",label:"Product type",rules:[{required:!0,message:"Product type required!"}],children:e(I,{defaultValue:"newsletters"})})})]})})})},D=m.exports.createContext({}),he=({visible:s,setVisible:t,onSubmit:o})=>{const{itemEditing:r}=m.exports.useContext(D),[a]=w.useForm(),i=()=>{a.validateFields().then(d=>{o(d)}).catch(d=>{}),t(!1)},f=()=>{t(!1)};return m.exports.useEffect(()=>{r&&a.setFieldsValue(r.item)},[r]),b(T,{title:"Edit Item",visible:s,onOk:i,onCancel:f,children:[r&&e(w,{form:a,layout:"vertical",children:e(A,{gutter:24,children:Object.keys(r.item).map(d=>e(k,{span:24,children:e(w.Item,{name:d,label:d,children:e(I,{})})},d))})}),r&&JSON.stringify(Object.keys(r),null,2)]})};const S=8,be=(s,t)=>C(x({userSelect:"none",padding:`${S}px ${S*2}px`,margin:`0 0 ${S}px 0`,background:s?"#3669e0":"rgb(255 255 255)"},t),{borderRadius:"5px",boxShadow:"-6px -6px 12px var(--light-shadow, transparent), 6px 6px 12px var(--shadow, transparent)"}),_e=s=>({background:s?"lightblue":"rgba(210, 221, 216, 0.5)",padding:S*2,width:"380px",border:"1px solid #3669e0",margin:"0 5px",borderRadius:"15px"}),we=L(de,10);function ve(){const[s,t]=m.exports.useState(we),[o,r]=m.exports.useState(!1),[a,i]=m.exports.useState(!1),[f,d]=m.exports.useState(!1),[_,F]=m.exports.useState(),y=m.exports.useRef({ind:null,index:null});function R(n){const{source:c,destination:l}=n;if(!l)return;const p=+c.droppableId,u=+l.droppableId;if(p===u){const g=me(s[p],c.index,l.index),h=[...s];h[p]=g,t(h)}else{const g=pe(s[p],s[u],c,l),h=[...s];h[p]=g[p],h[u]=g[u],t(h.filter(j=>j.length))}}const P=m.exports.useCallback(()=>{const n=[];return s.forEach(c=>{c.map(l=>{n.push(l)})}),n},[s]),B=n=>{const c=x({},n);t([...s,[c]])},N=m.exports.useCallback((n,c)=>{r(!0),y.current={ind:n,index:c}},[r]),E=(n,c,l)=>{const p=[...s],u=x({},l);console.log(n,c,u),p[n].splice(c+1,0,u),t(p.filter(g=>g.length))},q=(n,c,l)=>{F({ind:n,index:c,item:l}),i(!0)},U=m.exports.useCallback(({item:n,ind:c,index:l})=>b("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[b("div",{style:{flex:"1 1 auto"},children:[e("div",{style:{overflow:"hidden",width:180,height:120},children:e("img",{src:n.coverImage,alt:"coverImage",className:"img-cover"})}),e("p",{children:n.title})]}),b("div",{className:"btn-group",style:{width:"120px"},children:[e(v,{style:{background:"#ff4d4f",color:"#ffffff",width:"100%"},onClick:()=>{t(p=>{const u=[...p];return u[c].splice(l,1),u.filter(g=>g.length)})},children:"delete"}),e(v,{block:!0,onClick:()=>N(c,l),children:"Add item below"}),e(v,{onClick:()=>q(c,l,n),type:"primary",children:"Edit Item"})]})]}),[N,t]),J=n=>{if(Number.isInteger(y.current.ind)){E(y.current.ind,y.current.index,n),y.current=null,r(!1);return}r(!1),B(n)},V=n=>n.type==="application/json"||n.type==="text/plain",$=n=>{if(console.log(n),n.file.status==="uploading"){d(!0);return}if(n.file.status==="done"){const c=new FileReader;c.onload=l=>{const p=JSON.parse(l.target.result),u=L(p,10);d(!1),t(u)},c.readAsText(n.file.originFileObj)}},H=m.exports.useMemo(()=>b("div",{children:[f?e(te,{}):e(se,{}),e("div",{style:{marginTop:8},children:"Upload"})]}),[f]),Y=m.exports.useCallback(({file:n,onSuccess:c})=>{setTimeout(()=>{c("ok")},0)},[]),K=m.exports.useCallback(n=>{t(c=>{const l=[...c],p=l[_.ind];return p[_.index]=n,l}),F(null)},[_,t]);return e(D.Provider,{value:{itemEditing:_},children:b("div",{className:"container",children:[b("div",{style:{display:"flex",gap:"20px",padding:"10px 20px"},children:[e(v,{type:"primary",onClick:()=>{t([...s,[]])},children:"Add new group"}),e(v,{type:"primary",onClick:()=>{r(!0)},children:"Add new item"}),e(fe,{prepareToGenManifest:P}),e(ue,{genContent:P}),e(ae,{name:"manifest",listType:"picture-card",className:"manifest-uploader",showUploadList:!1,beforeUpload:V,onChange:$,customRequest:Y,children:H})]}),e("div",{style:{display:"flex"},children:e(ne,{onDragEnd:R,children:s.map((n,c)=>e(oe,{droppableId:`${c}`,children:(l,p)=>b("div",C(x({ref:l.innerRef,style:_e(p.isDraggingOver)},l.droppableProps),{children:[n.map((u,g)=>e(re,{draggableId:u.id,index:g,children:(h,j)=>e("div",C(x(x({ref:h.innerRef},h.draggableProps),h.dragHandleProps),{style:be(j.isDragging,h.draggableProps.style),className:"item",children:e(U,{ind:c,index:g,item:u})}))},u.id)),l.placeholder]}))},c+"key"))})}),e(ge,{setIsModalVisible:r,visible:o,onSubmit:J,onCancel:()=>{y.current=null}}),e(he,{visible:a,setVisible:i,onSubmit:K})]})})}ce.render(e(ie.StrictMode,{children:e(ve,{})}),document.getElementById("root"));
