var z=Object.defineProperty,G=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var M=(s,t,l)=>t in s?z(s,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[t]=l,x=(s,t)=>{for(var l in t||(t={}))W.call(t,l)&&M(s,l,t[l]);if(O)for(var l of O(t))X.call(t,l)&&M(s,l,t[l]);return s},S=(s,t)=>G(s,Q(t));import{r as p,j as h,F as Z,a as e,B as y,M as P,n as ee,b,R as A,C as j,I as F,c as L,L as te,P as se,U as ne,D as oe,d as re,e as le,f as ae,g as ie}from"./vendor.04409ec3.js";const ce=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function l(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=l(n);fetch(n.href,i)}};ce();var de=[{id:"collection_for_black_friday",cover:"https://conversions.am-usercontent.com/images/email_image_text_b5d24c5e1f484474851345407ee98ec5.jpeg",productType:"newsletters",title:"Collection For Black Friday",fullS3FilePath:"https://s3/testing/newsletters/collection_for_black_friday.json"},{id:"coupon_for_black_friday",cover:"https://conversions.am-usercontent.com/images/email_image_text_e26bf4a2b30642319e158bb97d138d40.jpeg",productType:"newsletters",title:"Coupon For Black Friday",fullS3FilePath:"https://s3/testing/newsletters/coupon_for_black_friday.json"},{id:"new_arrival_for_black_friday",cover:"https://conversions.am-usercontent.com/images/email_image_text_b2b3cb10f81c451795559591c5c57380.jpeg",productType:"newsletters",title:"New Arrival For Black Friday",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_for_black_friday.json"},{id:"collection_for_christmas",cover:"https://conversions.am-usercontent.com/images/email_image_text_8de53cab43774c0cb3bc0685d4690a23.jpeg",productType:"newsletters",title:"Collection For Christmas",fullS3FilePath:"https://s3/testing/newsletters/collection_for_christmas.json"},{id:"coupon_for_christmas",cover:"https://conversions.am-usercontent.com/images/email_image_text_f3ca975b72274c229922e85f336b550b.jpeg",productType:"newsletters",title:"Coupon For Christmas",fullS3FilePath:"https://s3/testing/newsletters/coupon_for_christmas.json"},{id:"new_arrival_for_christmas",cover:"https://conversions.am-usercontent.com/images/email_image_text_0919017a43d14ec5b64f7b60f9b48e41.jpeg",productType:"newsletters",title:"New Arrival For Christmas",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_for_christmas.json"},{id:"coupon_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_3b4acf3f55b1461c90fc926eef6dca7f.jpeg",productType:"newsletters",title:"Coupon 01",fullS3FilePath:"https://s3/testing/newsletters/coupon_01.json"},{id:"coupon_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_b4189586dd094a7c959a3d220b62f3de.jpeg",productType:"newsletters",title:"Coupon 02",fullS3FilePath:"https://s3/testing/newsletters/coupon_02.json"},{id:"coupon_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_7f34ac87863e40b2ab5540a65c809125.jpeg",productType:"newsletters",title:"Coupon 03",fullS3FilePath:"https://s3/testing/newsletters/coupon_03.json"},{id:"coupon_04",cover:"https://conversions.am-usercontent.com/images/email_image_text_a2de0f360a974b6bb7bd7f0af616ce03.jpeg",productType:"newsletters",title:"Coupon 04",fullS3FilePath:"https://s3/testing/newsletters/coupon_04.json"},{id:"coupon_05",cover:"https://conversions.am-usercontent.com/images/email_image_text_7b4e8013d92b452181b9c9cdd6599fc0.jpeg",productType:"newsletters",title:"Coupon 05",fullS3FilePath:"https://s3/testing/newsletters/coupon_05.json"},{id:"cyberMonday_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_8a8a18cfd25346e7be68b6ff09e83b68.jpeg",productType:"newsletters",title:"CyberMonday 01",fullS3FilePath:"https://s3/testing/newsletters/cyberMonday_01.json"},{id:"cyberMonday_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_3512c0df5b1f420ca6ef62d27a56b1ba.jpeg",productType:"newsletters",title:"CyberMonday 02",fullS3FilePath:"https://s3/testing/newsletters/cyberMonday_02.json"},{id:"cyberMonday_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_3c1fa93894d144e3a3d03ab32728418b.jpeg",productType:"newsletters",title:"CyberMonday 03",fullS3FilePath:"https://s3/testing/newsletters/cyberMonday_03.json"},{id:"default",cover:"https://conversions.am-usercontent.com/images/popup_background_image_5f0d44ba40c0465e8b43648722354f47.jpeg",productType:"newsletters",title:"Default",fullS3FilePath:"https://s3/testing/newsletters/default.json"},{id:"halloween_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_767abaf2659c43449a2f8aa4daf8ce8e.jpeg",productType:"newsletters",title:"Halloween 01",fullS3FilePath:"https://s3/testing/newsletters/halloween_01.json"},{id:"halloween_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_258c98b063e14add8d51072a479639b1.jpeg",productType:"newsletters",title:"Halloween 02",fullS3FilePath:"https://s3/testing/newsletters/halloween_02.json"},{id:"halloween_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_90c635e9fe474738890661ba19ad36ba.jpeg",productType:"newsletters",title:"Halloween 03",fullS3FilePath:"https://s3/testing/newsletters/halloween_03.json"},{id:"labor_day_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_40097d48bc074c5d8272620f1084faec.jpeg",productType:"newsletters",title:"Labor Day 01",fullS3FilePath:"https://s3/testing/newsletters/labor_day_01.json"},{id:"labor_day_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_06537185d06e43e7b152429109723215.jpeg",productType:"newsletters",title:"Labor Day 02",fullS3FilePath:"https://s3/testing/newsletters/labor_day_02.json"},{id:"labor_day_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_22a091a80ba54ab68755c49864c4145a.jpeg",productType:"newsletters",title:"Labor Day 03",fullS3FilePath:"https://s3/testing/newsletters/labor_day_03.json"},{id:"collection_for_new_year",cover:"https://conversions.am-usercontent.com/images/email_image_text_50d729a49e25487fbad191d8d7cb5232.jpeg",productType:"newsletters",title:"Collection For New Year",fullS3FilePath:"https://s3/testing/newsletters/collection_for_new_year.json"},{id:"coupon_for_new_year",cover:"https://conversions.am-usercontent.com/images/email_image_text_132f5fef008643d0bffeaf0448e20e74.jpeg",productType:"newsletters",title:"Coupon For New Year",fullS3FilePath:"https://s3/testing/newsletters/coupon_for_new_year.json"},{id:"new_arrival_for_new_year",cover:"https://conversions.am-usercontent.com/images/email_image_text_682013d6f3ad4e23a06180a46fa1c31a.jpeg",productType:"newsletters",title:"New Arrival For New Year",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_for_new_year.json"},{id:"new_arrival_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_9b230ff979344cf589206fa2c108485c.jpeg",productType:"newsletters",title:"New Arrival 01",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_01.json"},{id:"new_arrival_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_899cdec29a894ea69c8a9e9886613abf.jpeg",productType:"newsletters",title:"New Arrival 02",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_02.json"},{id:"new_arrival_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_ccf6fc0bf766436c9faee2d5474c6a1b.jpeg",productType:"newsletters",title:"New Arrival 03",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_03.json"},{id:"new_arrival_04",cover:"https://conversions.am-usercontent.com/images/email_image_text_dec8175583ae4ea6b2df44d751141570.jpeg",productType:"newsletters",title:"New Arrival 04",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_04.json"},{id:"new_arrival_05",cover:"https://conversions.am-usercontent.com/images/email_image_text_cf95abbbcd3543c1a1a9c403960c50e0.jpeg",productType:"newsletters",title:"New Arrival 05",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_05.json"},{id:"new_collection_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_53f3603e376e4f61a6b8f185cf154191.jpeg",productType:"newsletters",title:"New Collection 01",fullS3FilePath:"https://s3/testing/newsletters/new_collection_01.json"},{id:"new_collection_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_1331feecc5414befb8415887a020abf8.jpeg",productType:"newsletters",title:"New Collection 02",fullS3FilePath:"https://s3/testing/newsletters/new_collection_02.json"},{id:"new_collection_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_ba05cc96f64e4a83a3a6a7899ddaaa40.jpeg",productType:"newsletters",title:"New Collection 03",fullS3FilePath:"https://s3/testing/newsletters/new_collection_03.json"},{id:"new_collection_04",cover:"https://conversions.am-usercontent.com/images/email_image_text_77aac06bb88d4478a86a837b2d669629.jpeg",productType:"newsletters",title:"New Collection 04",fullS3FilePath:"https://s3/testing/newsletters/new_collection_04.json"},{id:"new_collection_05",cover:"https://conversions.am-usercontent.com/images/email_image_text_a32df7cee10d4bf29cc03ab9576be34d.jpeg",productType:"newsletters",title:"New Collection 05",fullS3FilePath:"https://s3/testing/newsletters/new_collection_05.json"},{id:"collection_for_thanksgiving",cover:"https://conversions.am-usercontent.com/images/email_image_text_481eeb59f70d4bceb19d0eb65dc57f39.jpeg",productType:"newsletters",title:"Collection For Thanksgiving",fullS3FilePath:"https://s3/testing/newsletters/collection_for_thanksgiving.json"},{id:"coupon_for_thanksgiving",cover:"https://conversions.am-usercontent.com/images/email_image_text_002651f114274ba894cc05fe03217619.jpeg",productType:"newsletters",title:"Coupon For Thanksgiving",fullS3FilePath:"https://s3/testing/newsletters/coupon_for_thanksgiving.json"},{id:"new_arrival_for_thanksgiving",cover:"https://conversions.am-usercontent.com/images/email_image_text_6dc5493a996642a88fdcb61bdefcd19d.jpeg",productType:"newsletters",title:"New Arrival For Thanksgiving",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_for_thanksgiving.json"}];const pe=(s,t,l)=>{const a=Array.from(s),[n]=a.splice(t,1);return a.splice(l,0,n),a},me=(s,t,l,a)=>{const n=Array.from(s),i=Array.from(t),[u]=n.splice(l.index,1);i.splice(a.index,0,u);const d={};return d[l.droppableId]=n,d[a.droppableId]=i,d},ue=({children:s,addNewItem:t,prepareToGenManifest:l})=>{const[a,n]=p.exports.useState(!1),i=p.exports.useMemo(()=>l(),[l]),u=()=>{n(!0)},d=()=>{n(!1)},w=()=>{n(!1)},C=()=>{ee.open({message:"Copied to clipboard"})};return h(Z,{children:[e(y,{type:"primary",onClick:u,children:"Copy new json manifest"}),e(P,{title:"Basic Modal",visible:a,onOk:d,onCancel:w,width:"80%",children:h("div",{children:[e(y,{type:"primary",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(i)).then(()=>{console.log("Copied to clipboard"),C()})},children:"Copy Json"}),e("hr",{}),e("pre",{children:JSON.stringify(i,null,2)})]})})]})},_e=({genContent:s})=>{const t=p.exports.useCallback(()=>{const l=document.createElement("a"),n=JSON.stringify(s()).split(`
`),i=new Blob([n.join(`\r
`)],{type:"text/plain; charset=utf-8"}),u=URL.createObjectURL(i),d="manifest.json";l.href=u,l.download=d,l.click(),URL.revokeObjectURL(u)},[s]);return e(y,{type:"primary",onClick:t,children:"Download"})},ge=({setIsModalVisible:s,visible:t,onSubmit:l,onCancel:a})=>{const[n]=b.useForm(),i=()=>{n.validateFields().then(w=>{l(w)}).catch(w=>{})};return e(P,{title:"Basic Modal",visible:t,onOk:()=>{i(),s(!1)},onCancel:()=>{a&&a(),s(!1)},children:e(b,{name:"addNewItem",layout:"vertical",form:n,children:h(A,{gutter:24,children:[e(j,{span:12,children:e(b.Item,{name:"id",label:"Id",rules:[{required:!0,message:"Id required!"}],children:e(F,{})})}),e(j,{span:12,children:e(b.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Cover required!"}],children:e(F,{})})}),e(j,{span:12,children:e(b.Item,{name:"cover",label:"Cover",rules:[{required:!0,message:"Cover required!"}],children:e(F,{})})}),e(j,{span:12,children:e(b.Item,{name:"fullS3FilePath",label:"Full S3 file path",rules:[{required:!0,message:"Cover required!"}],children:e(F,{})})})]})})})},D=p.exports.createContext({}),fe=({visible:s,setVisible:t,onSubmit:l})=>{const{itemEditing:a}=p.exports.useContext(D),[n]=b.useForm(),i=()=>{n.validateFields().then(d=>{l(d)}).catch(d=>{}),t(!1)},u=()=>{t(!1)};return p.exports.useEffect(()=>{a&&n.setFieldsValue(a.item)},[a]),h(P,{title:"Edit Item",visible:s,onOk:i,onCancel:u,children:[a&&e(b,{form:n,layout:"vertical",children:e(A,{gutter:24,children:Object.keys(a.item).map(d=>e(j,{span:12,children:e(b.Item,{name:d,label:d,children:e(F,{})})},d))})}),a&&JSON.stringify(Object.keys(a),null,2)]})};const k=8,he=(s,t)=>S(x({userSelect:"none",padding:`${k}px ${k*2}px`,margin:`0 0 ${k}px 0`,background:s?"#3669e0":"rgb(255 255 255)"},t),{borderRadius:"5px",boxShadow:"-6px -6px 12px var(--light-shadow, transparent), 6px 6px 12px var(--shadow, transparent)"}),we=s=>({background:s?"lightblue":"rgba(210, 221, 216, 0.5)",padding:k*2,width:"380px",border:"1px solid #3669e0",margin:"0 5px",borderRadius:"15px"}),be=L(de,10);function ve(){const[s,t]=p.exports.useState(be),[l,a]=p.exports.useState(!1),[n,i]=p.exports.useState(!1),[u,d]=p.exports.useState(!1),[w,C]=p.exports.useState(),v=p.exports.useRef({ind:null,index:null});function R(o){const{source:r,destination:c}=o;if(!c)return;const m=+r.droppableId,_=+c.droppableId;if(m===_){const g=pe(s[m],r.index,c.index),f=[...s];f[m]=g,t(f)}else{const g=me(s[m],s[_],r,c),f=[...s];f[m]=g[m],f[_]=g[_],t(f.filter(T=>T.length))}}const I=p.exports.useCallback(()=>{const o=[];return s.forEach(r=>{r.map(c=>{o.push(c)})}),o},[s]),B=o=>{const r={id:o.id,title:o.title};t([...s,[r]])},N=p.exports.useCallback((o,r)=>{a(!0),v.current={ind:o,index:r}},[a]),E=(o,r,c)=>{const m=[...s],_={id:c.id,title:c.title};m[o].splice(r+1,0,_),t(m.filter(g=>g.length))},q=(o,r,c)=>{C({ind:o,index:r,item:c}),i(!0)},U=p.exports.useCallback(({item:o,ind:r,index:c})=>h("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[h("div",{style:{flex:"1 1 auto"},children:[e("div",{style:{overflow:"hidden",width:180,height:120},children:e("img",{src:o.cover,alt:"cover",className:"img-cover"})}),e("p",{children:o.title})]}),h("div",{className:"btn-group",style:{width:"120px"},children:[e(y,{style:{background:"#ff4d4f",color:"#ffffff",width:"100%"},onClick:()=>{t(m=>{const _=[...m];return _[r].splice(c,1),_.filter(g=>g.length)})},children:"delete"}),e(y,{block:!0,onClick:()=>N(r,c),children:"Add item below"}),e(y,{onClick:()=>q(r,c,o),type:"primary",children:"Edit Item"})]})]}),[N,t]),J=o=>{var r;if(console.log(v.current),(r=v.current)==null?void 0:r.ind){E(v.current.ind,v.current.index,o),v.current=null,a(!1);return}a(!1),B(o)},$=o=>o.type==="application/json"||o.type==="text/plain",V=o=>{if(console.log(o),o.file.status==="uploading"){d(!0);return}if(o.file.status==="done"){const r=new FileReader;r.onload=c=>{const m=JSON.parse(c.target.result),_=L(m,10);d(!1),t(_)},r.readAsText(o.file.originFileObj)}},H=p.exports.useMemo(()=>h("div",{children:[u?e(te,{}):e(se,{}),e("div",{style:{marginTop:8},children:"Upload"})]}),[u]),Y=p.exports.useCallback(({file:o,onSuccess:r})=>{setTimeout(()=>{r("ok")},0)},[]),K=p.exports.useCallback(o=>{t(r=>{const c=[...r],m=c[w.ind];return m[w.index]=o,c}),C(null)},[w,t]);return e(D.Provider,{value:{itemEditing:w},children:h("div",{className:"container",children:[h("div",{style:{display:"flex",gap:"20px",padding:"10px 20px"},children:[e(y,{type:"primary",onClick:()=>{t([...s,[]])},children:"Add new group"}),e(y,{type:"primary",onClick:()=>{a(!0)},children:"Add new item"}),e(ue,{prepareToGenManifest:I}),e(_e,{genContent:I}),e(ne,{name:"manifest",listType:"picture-card",className:"manifest-uploader",showUploadList:!1,beforeUpload:$,onChange:V,customRequest:Y,children:H})]}),e("div",{style:{display:"flex"},children:e(oe,{onDragEnd:R,children:s.map((o,r)=>e(re,{droppableId:`${r}`,children:(c,m)=>h("div",S(x({ref:c.innerRef,style:we(m.isDraggingOver)},c.droppableProps),{children:[o.map((_,g)=>e(le,{draggableId:_.id,index:g,children:(f,T)=>e("div",S(x(x({ref:f.innerRef},f.draggableProps),f.dragHandleProps),{style:he(T.isDragging,f.draggableProps.style),className:"item",children:e(U,{ind:r,index:g,item:_})}))},_.id)),c.placeholder]}))},r+"key"))})}),e(ge,{setIsModalVisible:a,visible:l,onSubmit:J,onCancel:()=>{v.current=null}}),e(fe,{visible:n,setVisible:i,onSubmit:K})]})})}ae.render(e(ie.StrictMode,{children:e(ve,{})}),document.getElementById("root"));
