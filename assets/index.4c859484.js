var z=Object.defineProperty,Q=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var M=(s,t,a)=>t in s?z(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,x=(s,t)=>{for(var a in t||(t={}))X.call(t,a)&&M(s,a,t[a]);if(O)for(var a of O(t))Z.call(t,a)&&M(s,a,t[a]);return s},C=(s,t)=>Q(s,W(t));import{r as m,j as h,F as ee,a as e,B as v,M as P,n as te,b as w,R as A,C as j,I as F,c as L,L as se,P as ne,U as oe,D as re,d as le,e as ae,f as ie,g as ce}from"./vendor.04409ec3.js";const de=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}};de();var T=[{id:"collection_for_black_friday",cover:"https://conversions.am-usercontent.com/images/email_image_text_b5d24c5e1f484474851345407ee98ec5.jpeg",productType:"newsletters",title:"Collection For Black Friday",fullS3FilePath:"https://s3/testing/newsletters/collection_for_black_friday.json"},{id:"coupon_for_black_friday",cover:"https://conversions.am-usercontent.com/images/email_image_text_e26bf4a2b30642319e158bb97d138d40.jpeg",productType:"newsletters",title:"Coupon For Black Friday",fullS3FilePath:"https://s3/testing/newsletters/coupon_for_black_friday.json"},{id:"new_arrival_for_black_friday",cover:"https://conversions.am-usercontent.com/images/email_image_text_b2b3cb10f81c451795559591c5c57380.jpeg",productType:"newsletters",title:"New Arrival For Black Friday",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_for_black_friday.json"},{id:"collection_for_christmas",cover:"https://conversions.am-usercontent.com/images/email_image_text_8de53cab43774c0cb3bc0685d4690a23.jpeg",productType:"newsletters",title:"Collection For Christmas",fullS3FilePath:"https://s3/testing/newsletters/collection_for_christmas.json"},{id:"coupon_for_christmas",cover:"https://conversions.am-usercontent.com/images/email_image_text_f3ca975b72274c229922e85f336b550b.jpeg",productType:"newsletters",title:"Coupon For Christmas",fullS3FilePath:"https://s3/testing/newsletters/coupon_for_christmas.json"},{id:"new_arrival_for_christmas",cover:"https://conversions.am-usercontent.com/images/email_image_text_0919017a43d14ec5b64f7b60f9b48e41.jpeg",productType:"newsletters",title:"New Arrival For Christmas",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_for_christmas.json"},{id:"coupon_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_3b4acf3f55b1461c90fc926eef6dca7f.jpeg",productType:"newsletters",title:"Coupon 01",fullS3FilePath:"https://s3/testing/newsletters/coupon_01.json"},{id:"coupon_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_b4189586dd094a7c959a3d220b62f3de.jpeg",productType:"newsletters",title:"Coupon 02",fullS3FilePath:"https://s3/testing/newsletters/coupon_02.json"},{id:"coupon_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_7f34ac87863e40b2ab5540a65c809125.jpeg",productType:"newsletters",title:"Coupon 03",fullS3FilePath:"https://s3/testing/newsletters/coupon_03.json"},{id:"coupon_04",cover:"https://conversions.am-usercontent.com/images/email_image_text_a2de0f360a974b6bb7bd7f0af616ce03.jpeg",productType:"newsletters",title:"Coupon 04",fullS3FilePath:"https://s3/testing/newsletters/coupon_04.json"},{id:"coupon_05",cover:"https://conversions.am-usercontent.com/images/email_image_text_7b4e8013d92b452181b9c9cdd6599fc0.jpeg",productType:"newsletters",title:"Coupon 05",fullS3FilePath:"https://s3/testing/newsletters/coupon_05.json"},{id:"cyberMonday_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_8a8a18cfd25346e7be68b6ff09e83b68.jpeg",productType:"newsletters",title:"CyberMonday 01",fullS3FilePath:"https://s3/testing/newsletters/cyberMonday_01.json"},{id:"cyberMonday_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_3512c0df5b1f420ca6ef62d27a56b1ba.jpeg",productType:"newsletters",title:"CyberMonday 02",fullS3FilePath:"https://s3/testing/newsletters/cyberMonday_02.json"},{id:"cyberMonday_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_3c1fa93894d144e3a3d03ab32728418b.jpeg",productType:"newsletters",title:"CyberMonday 03",fullS3FilePath:"https://s3/testing/newsletters/cyberMonday_03.json"},{id:"default",cover:"https://conversions.am-usercontent.com/images/popup_background_image_5f0d44ba40c0465e8b43648722354f47.jpeg",productType:"newsletters",title:"Default",fullS3FilePath:"https://s3/testing/newsletters/default.json"},{id:"halloween_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_767abaf2659c43449a2f8aa4daf8ce8e.jpeg",productType:"newsletters",title:"Halloween 01",fullS3FilePath:"https://s3/testing/newsletters/halloween_01.json"},{id:"halloween_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_258c98b063e14add8d51072a479639b1.jpeg",productType:"newsletters",title:"Halloween 02",fullS3FilePath:"https://s3/testing/newsletters/halloween_02.json"},{id:"halloween_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_90c635e9fe474738890661ba19ad36ba.jpeg",productType:"newsletters",title:"Halloween 03",fullS3FilePath:"https://s3/testing/newsletters/halloween_03.json"},{id:"labor_day_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_40097d48bc074c5d8272620f1084faec.jpeg",productType:"newsletters",title:"Labor Day 01",fullS3FilePath:"https://s3/testing/newsletters/labor_day_01.json"},{id:"labor_day_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_06537185d06e43e7b152429109723215.jpeg",productType:"newsletters",title:"Labor Day 02",fullS3FilePath:"https://s3/testing/newsletters/labor_day_02.json"},{id:"labor_day_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_22a091a80ba54ab68755c49864c4145a.jpeg",productType:"newsletters",title:"Labor Day 03",fullS3FilePath:"https://s3/testing/newsletters/labor_day_03.json"},{id:"collection_for_new_year",cover:"https://conversions.am-usercontent.com/images/email_image_text_50d729a49e25487fbad191d8d7cb5232.jpeg",productType:"newsletters",title:"Collection For New Year",fullS3FilePath:"https://s3/testing/newsletters/collection_for_new_year.json"},{id:"coupon_for_new_year",cover:"https://conversions.am-usercontent.com/images/email_image_text_132f5fef008643d0bffeaf0448e20e74.jpeg",productType:"newsletters",title:"Coupon For New Year",fullS3FilePath:"https://s3/testing/newsletters/coupon_for_new_year.json"},{id:"new_arrival_for_new_year",cover:"https://conversions.am-usercontent.com/images/email_image_text_682013d6f3ad4e23a06180a46fa1c31a.jpeg",productType:"newsletters",title:"New Arrival For New Year",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_for_new_year.json"},{id:"new_arrival_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_9b230ff979344cf589206fa2c108485c.jpeg",productType:"newsletters",title:"New Arrival 01",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_01.json"},{id:"new_arrival_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_899cdec29a894ea69c8a9e9886613abf.jpeg",productType:"newsletters",title:"New Arrival 02",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_02.json"},{id:"new_arrival_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_ccf6fc0bf766436c9faee2d5474c6a1b.jpeg",productType:"newsletters",title:"New Arrival 03",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_03.json"},{id:"new_arrival_04",cover:"https://conversions.am-usercontent.com/images/email_image_text_dec8175583ae4ea6b2df44d751141570.jpeg",productType:"newsletters",title:"New Arrival 04",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_04.json"},{id:"new_arrival_05",cover:"https://conversions.am-usercontent.com/images/email_image_text_cf95abbbcd3543c1a1a9c403960c50e0.jpeg",productType:"newsletters",title:"New Arrival 05",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_05.json"},{id:"new_collection_01",cover:"https://conversions.am-usercontent.com/images/email_image_text_53f3603e376e4f61a6b8f185cf154191.jpeg",productType:"newsletters",title:"New Collection 01",fullS3FilePath:"https://s3/testing/newsletters/new_collection_01.json"},{id:"new_collection_02",cover:"https://conversions.am-usercontent.com/images/email_image_text_1331feecc5414befb8415887a020abf8.jpeg",productType:"newsletters",title:"New Collection 02",fullS3FilePath:"https://s3/testing/newsletters/new_collection_02.json"},{id:"new_collection_03",cover:"https://conversions.am-usercontent.com/images/email_image_text_ba05cc96f64e4a83a3a6a7899ddaaa40.jpeg",productType:"newsletters",title:"New Collection 03",fullS3FilePath:"https://s3/testing/newsletters/new_collection_03.json"},{id:"new_collection_04",cover:"https://conversions.am-usercontent.com/images/email_image_text_77aac06bb88d4478a86a837b2d669629.jpeg",productType:"newsletters",title:"New Collection 04",fullS3FilePath:"https://s3/testing/newsletters/new_collection_04.json"},{id:"new_collection_05",cover:"https://conversions.am-usercontent.com/images/email_image_text_a32df7cee10d4bf29cc03ab9576be34d.jpeg",productType:"newsletters",title:"New Collection 05",fullS3FilePath:"https://s3/testing/newsletters/new_collection_05.json"},{id:"collection_for_thanksgiving",cover:"https://conversions.am-usercontent.com/images/email_image_text_481eeb59f70d4bceb19d0eb65dc57f39.jpeg",productType:"newsletters",title:"Collection For Thanksgiving",fullS3FilePath:"https://s3/testing/newsletters/collection_for_thanksgiving.json"},{id:"coupon_for_thanksgiving",cover:"https://conversions.am-usercontent.com/images/email_image_text_002651f114274ba894cc05fe03217619.jpeg",productType:"newsletters",title:"Coupon For Thanksgiving",fullS3FilePath:"https://s3/testing/newsletters/coupon_for_thanksgiving.json"},{id:"new_arrival_for_thanksgiving",cover:"https://conversions.am-usercontent.com/images/email_image_text_6dc5493a996642a88fdcb61bdefcd19d.jpeg",productType:"newsletters",title:"New Arrival For Thanksgiving",fullS3FilePath:"https://s3/testing/newsletters/new_arrival_for_thanksgiving.json"}];const pe=(s,t,a)=>{const r=Array.from(s),[n]=r.splice(t,1);return r.splice(a,0,n),r},me=(s,t,a,r)=>{const n=Array.from(s),i=Array.from(t),[u]=n.splice(a.index,1);i.splice(r.index,0,u);const d={};return d[a.droppableId]=n,d[r.droppableId]=i,d},ue=({children:s,addNewItem:t})=>{const[a,r]=m.exports.useState(!1),n=()=>{r(!0)},i=()=>{r(!1)},u=()=>{r(!1)},d=()=>{te.open({message:"Copied to clipboard"})};return h(ee,{children:[e(v,{type:"primary",onClick:n,children:"Copy new json manifest"}),e(P,{title:"Basic Modal",visible:a,onOk:i,onCancel:u,width:"80%",children:h("div",{children:[e(v,{type:"primary",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(T)).then(()=>{console.log("Copied to clipboard"),d()})},children:"Copy Json"}),e("hr",{}),e("pre",{children:JSON.stringify(T,null,2)})]})})]})},_e=({genContent:s})=>{const t=m.exports.useCallback(()=>{const a=document.createElement("a"),n=JSON.stringify(s()).split(`
`),i=new Blob([n.join(`\r
`)],{type:"text/plain; charset=utf-8"}),u=URL.createObjectURL(i),d="manifest.json";a.href=u,a.download=d,a.click(),URL.revokeObjectURL(u)},[s]);return e(v,{type:"primary",onClick:t,children:"Download"})},ge=({setIsModalVisible:s,visible:t,onSubmit:a,onCancel:r})=>{const[n]=w.useForm(),i=()=>{n.validateFields().then(b=>{a(b)}).catch(b=>{})};return e(P,{title:"Basic Modal",visible:t,onOk:()=>{i(),s(!1)},onCancel:()=>{r&&r(),s(!1)},children:e(w,{name:"addNewItem",layout:"vertical",form:n,children:h(A,{gutter:24,children:[e(j,{span:12,children:e(w.Item,{name:"id",label:"Id",rules:[{required:!0,message:"Id required!"}],children:e(F,{})})}),e(j,{span:12,children:e(w.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Cover required!"}],children:e(F,{})})}),e(j,{span:12,children:e(w.Item,{name:"cover",label:"Cover",rules:[{required:!0,message:"Cover required!"}],children:e(F,{})})}),e(j,{span:12,children:e(w.Item,{name:"fullS3FilePath",label:"Full S3 file path",rules:[{required:!0,message:"Cover required!"}],children:e(F,{})})})]})})})},D=m.exports.createContext({}),fe=({visible:s,setVisible:t,onSubmit:a})=>{const{itemEditing:r}=m.exports.useContext(D),[n]=w.useForm(),i=()=>{n.validateFields().then(d=>{a(d)}).catch(d=>{}),t(!1)},u=()=>{t(!1)};return m.exports.useEffect(()=>{r&&n.setFieldsValue(r.item)},[r]),h(P,{title:"Edit Item",visible:s,onOk:i,onCancel:u,children:[r&&e(w,{form:n,layout:"vertical",children:e(A,{gutter:24,children:Object.keys(r.item).map(d=>e(j,{span:12,children:e(w.Item,{name:d,label:d,children:e(F,{})})},d))})}),r&&JSON.stringify(Object.keys(r),null,2)]})};const S=8,he=(s,t)=>C(x({userSelect:"none",padding:`${S}px ${S*2}px`,margin:`0 0 ${S}px 0`,background:s?"#3669e0":"rgb(255 255 255)"},t),{borderRadius:"5px",boxShadow:"-6px -6px 12px var(--light-shadow, transparent), 6px 6px 12px var(--shadow, transparent)"}),we=s=>({background:s?"lightblue":"rgba(210, 221, 216, 0.5)",padding:S*2,width:"380px",border:"1px solid #3669e0",margin:"0 5px",borderRadius:"15px"}),be=L(T,10);function ve(){const[s,t]=m.exports.useState(be),[a,r]=m.exports.useState(!1),[n,i]=m.exports.useState(!1),[u,d]=m.exports.useState(!1),[b,I]=m.exports.useState(),y=m.exports.useRef({ind:null,index:null});function R(o){const{source:l,destination:c}=o;if(!c)return;const p=+l.droppableId,_=+c.droppableId;if(p===_){const g=pe(s[p],l.index,c.index),f=[...s];f[p]=g,t(f)}else{const g=me(s[p],s[_],l,c),f=[...s];f[p]=g[p],f[_]=g[_],t(f.filter(k=>k.length))}}const B=m.exports.useCallback(()=>{const o=[];return s.forEach(l=>{l.map(c=>{o.push(c)})}),o},[s]),E=o=>{const l={id:o.id,title:o.title};t([...s,[l]])},N=m.exports.useCallback((o,l)=>{r(!0),y.current={ind:o,index:l}},[r]),q=(o,l,c)=>{const p=[...s],_={id:c.id,title:c.title};p[o].splice(l+1,0,_),t(p.filter(g=>g.length))},U=(o,l,c)=>{I({ind:o,index:l,item:c}),i(!0)},J=m.exports.useCallback(({item:o,ind:l,index:c})=>h("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[h("div",{style:{flex:"1 1 auto"},children:[e("div",{style:{overflow:"hidden",width:180,height:120},children:e("img",{src:o.cover,alt:"cover",className:"img-cover"})}),e("p",{children:o.title})]}),h("div",{className:"btn-group",style:{width:"120px"},children:[e(v,{style:{background:"#ff4d4f",color:"#ffffff",width:"100%"},onClick:()=>{t(p=>{const _=[...p];return _[l].splice(c,1),_.filter(g=>g.length)})},children:"delete"}),e(v,{block:!0,onClick:()=>N(l,c),children:"Add item below"}),e(v,{onClick:()=>U(l,c,o),type:"primary",children:"Edit Item"})]})]}),[N,t]),$=o=>{var l;if(console.log(y.current),(l=y.current)==null?void 0:l.ind){q(y.current.ind,y.current.index,o),y.current=null,r(!1);return}r(!1),E(o)},V=o=>o.type==="application/json"||o.type==="text/plain",H=o=>{if(console.log(o),o.file.status==="uploading"){d(!0);return}if(o.file.status==="done"){const l=new FileReader;l.onload=c=>{const p=JSON.parse(c.target.result),_=L(p,10);d(!1),t(_)},l.readAsText(o.file.originFileObj)}},Y=m.exports.useMemo(()=>h("div",{children:[u?e(se,{}):e(ne,{}),e("div",{style:{marginTop:8},children:"Upload"})]}),[u]),G=m.exports.useCallback(({file:o,onSuccess:l})=>{setTimeout(()=>{l("ok")},0)},[]),K=m.exports.useCallback(o=>{t(l=>{const c=[...l],p=c[b.ind];return p[b.index]=o,c}),I(null)},[b,t]);return e(D.Provider,{value:{itemEditing:b},children:h("div",{className:"container",children:[h("div",{style:{display:"flex",gap:"20px",padding:"10px 20px"},children:[e(v,{type:"primary",onClick:()=>{t([...s,[]])},children:"Add new group"}),e(v,{type:"primary",onClick:()=>{r(!0)},children:"Add new item"}),e(ue,{}),e(_e,{genContent:B}),e(oe,{name:"manifest",listType:"picture-card",className:"manifest-uploader",showUploadList:!1,beforeUpload:V,onChange:H,customRequest:G,children:Y})]}),e("div",{style:{display:"flex"},children:e(re,{onDragEnd:R,children:s.map((o,l)=>e(le,{droppableId:`${l}`,children:(c,p)=>h("div",C(x({ref:c.innerRef,style:we(p.isDraggingOver)},c.droppableProps),{children:[o.map((_,g)=>e(ae,{draggableId:_.id,index:g,children:(f,k)=>e("div",C(x(x({ref:f.innerRef},f.draggableProps),f.dragHandleProps),{style:he(k.isDragging,f.draggableProps.style),className:"item",children:e(J,{ind:l,index:g,item:_})}))},_.id)),c.placeholder]}))},l+"key"))})}),e(ge,{setIsModalVisible:r,visible:a,onSubmit:$,onCancel:()=>{y.current=null}}),e(fe,{visible:n,setVisible:i,onSubmit:K})]})})}ie.render(e(ce.StrictMode,{children:e(ve,{})}),document.getElementById("root"));
